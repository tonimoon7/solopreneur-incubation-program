# Block 3: history-insight로 세션 히스토리 분석

> 공식 문서: https://code.claude.com/docs/ko/memory

## EXPLAIN

### Block 2에서 여기로

Block 2에서 session-wrap 스킬을 실행했습니다. 그 실행 기록이 어딘가에 저장되어 있습니다. 이번 블록에서는 그 "저장된 기록"을 들여다보는 방법을 배웁니다. session-wrap이 만들어낸 결과뿐 아니라, 과거 모든 세션의 기록에서 패턴을 찾아주는 도구가 바로 **history-insight**입니다.

### 세션 히스토리란?

Claude Code와 대화할 때마다 기록이 남습니다. 마치 **일기장**처럼 모든 대화가 파일로 저장됩니다.

- 위치: `~/.claude/projects/` 폴더 안에 자동으로 저장됩니다
- 프로젝트별로 폴더가 나뉘어 있음
- 하나의 세션(대화) = 하나의 파일
- 파일 형식은 몰라도 됩니다. Claude가 알아서 읽어줍니다

**비유하면:**
일기장을 매일 쓴다고 생각해보세요. 한 달 뒤에 일기장을 다시 펼쳐보면 "아, 이번 달엔 이런 고민을 많이 했구나", "이런 실수를 자주 했네"라는 패턴이 보입니다. Claude Code도 마찬가지입니다. 쌓여 있는 대화 기록에서 패턴을 찾아주는 것이 바로 **history-insight** 스킬입니다.

### history-insight 스킬은 뭘 하나?

이 "일기장"을 읽어서 유용한 패턴을 찾아줍니다.

- "이 프로젝트에서 가장 많이 한 작업은?"
- "반복되는 실수 패턴이 있을까?"
- "프로젝트별로 어떤 작업을 했는지 정리해줘"

**핵심**: 과거의 자기 자신에게서 배우는 것입니다.

### 데이터 흐름

세션 파일에는 실제 대화 외에도 파일 변경 이력, 큐 작업 같은 **부속 자료**가 대량으로 포함되어 있습니다. history-insight는 불필요한 부분을 걸러내고 핵심만 추출합니다.

```
세션 대화 기록 (파일)
    |
history-insight 스킬이 읽기
    |
불필요한 부분 제거 (대부분이 부속 자료)
    |
실제 대화만 추출
    |
인사이트 분석 + 리포트
```

비유하자면, 두꺼운 일기장에서 실제로 쓴 글은 아주 일부분이고, 나머지는 날짜 도장, 날씨 기록, 영수증 같은 부속 자료인 셈입니다. **history-insight는 이 부속 자료를 다 걷어내고, 실제 대화만 모아서 분석합니다.** 그래서 아무리 기록이 많아도 빠르게 핵심만 뽑아낼 수 있습니다.

---

### 활용 사례

| 질문 | history-insight가 해주는 것 |
|------|---------------------------|
| "이번 주에 가장 많이 한 작업이 뭐였지?" | 세션별 작업 내용을 분류하고 빈도순 정리 |
| "내가 자주 하는 실수 패턴이 있을까?" | 반복되는 오류, 재시도 패턴 추출 |
| "프로젝트별로 어떤 작업을 했는지 정리해줘" | 프로젝트 폴더별 세션 분류 및 요약 |

---

## EXECUTE

### 사전 확인

Block 2에서 사용했던 **작업 세션 탭**에서 실습합니다. 탭을 닫았다면 새 터미널 탭(`Cmd + T`)을 열고, 같은 프로젝트 폴더로 이동한 뒤 `claude`를 실행하세요. 교육 세션 탭이 아닌 별도 탭에서 진행합니다.

history-insight 스킬이 설치되어 있는지 확인합니다. Claude Code에서:

```
어떤 스킬이 설치되어 있어?
```

목록에 `history-insight`가 있으면 아래 단계로 진행합니다. 없다면 강사에게 문의하세요.

### 1단계: 세션 파일 확인하기

먼저 기록이 어디에 있는지 확인합니다. Claude에게 아래와 같이 요청하세요:

```
내 Claude Code 세션 기록이 어디에 저장되어 있는지 보여줘
```

Claude가 `~/.claude/projects/` 폴더 안의 세션 파일 목록을 보여줍니다. 프로젝트별로 폴더가 나뉘어 있고, 각 폴더 안에 세션 파일들이 있는 것을 확인하세요.

### 2단계: history-insight 실행

아래 명령으로 분석을 시작합니다:

```
/history-insight
```

> 아직 세션이 많지 않다면, 분석 결과가 짧을 수 있습니다. 괜찮습니다! Day 1~3에서의 세션이라도 패턴을 찾아줄 것입니다. 캠프가 끝날 때쯤 다시 실행하면 더 풍부한 인사이트를 얻을 수 있습니다.

### 3단계: 분석 범위 선택

분석 범위를 선택합니다:

- **"현재 프로젝트만"** - 지금 작업 중인 프로젝트의 세션만 분석
- **"모든 Claude Code 세션"** - 전체 세션을 분석

> 처음이라면 "현재 프로젝트만"으로 시작하는 것을 추천합니다. 데이터가 적을수록 결과를 이해하기 쉽습니다.

### 4단계: 결과 확인

분석 결과를 읽어봅니다. 아래 항목을 확인하세요:

- 몇 개의 세션이 분석되었는지
- 어떤 인사이트가 추출되었는지
- 흥미로운 패턴이 있는지

### 5단계: 자유 질문

결과를 보고 궁금한 것을 질문합니다:

```
이 분석 결과에서 가장 흥미로운 패턴을 더 자세히 설명해줘
```

다른 질문 예시:
- "내가 가장 자주 사용하는 도구(Tool)는 뭐야?"
- "가장 긴 세션은 어떤 작업이었어?"
- "이 패턴을 바탕으로 내 워크플로우 개선 제안을 해줘"

### 문제가 생기면

| 상황 | 해결 방법 |
|------|----------|
| "세션 파일을 찾을 수 없습니다" | 아직 충분한 세션 기록이 쌓이지 않았을 수 있습니다. "모든 Claude Code 세션"으로 범위를 넓혀서 다시 시도하세요. |
| "jq가 필요합니다" | Claude에게 "jq를 설치해줘"라고 요청하세요. 자동으로 설치해줍니다. 안 되면 강사에게 문의하세요. |
| 분석 결과가 비어 있음 | Claude Code를 더 사용한 뒤 다시 시도하거나, "모든 세션"으로 범위를 넓히세요. |

### 더 알고 싶다면

history-insight 원본 스킬에는 대량의 세션 파일을 처리하는 고급 기능(배치 파이프라인, 병렬 분석)이 있습니다. 궁금하면 Claude에게 물어보세요:

```
history-insight 플러그인의 원본 SKILL.md에서 Batch Extract Pipeline 부분을 설명해줘
```

## QUIZ

```json
AskUserQuestion({
  "questions": [{
    "question": "Claude Code 세션 기록 파일에서 실제 대화는 전체의 몇 %일까?",
    "header": "Quiz 3",
    "options": [
      {"label": "약 6%", "description": "94%는 부속 자료(파일 변경 기록 등)"},
      {"label": "약 50%", "description": "절반이 대화, 절반이 기타"},
      {"label": "약 90%", "description": "대부분이 실제 대화 내용"}
    ],
    "multiSelect": false
  }]
})
```

정답: 1번. 세션 파일의 대부분은 파일 변경 이력 같은 부속 자료다. 실제 사용자와 Claude의 대화는 약 6%만 차지한다. history-insight는 이 핵심 대화만 추출해서 분석하므로, 큰 파일도 빠르게 처리된다.
